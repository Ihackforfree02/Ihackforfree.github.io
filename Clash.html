<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Clash Royale Deck Builder with Evo & Search</title>
  <style>
    /* Core styling based on your MR GAMES theme */
    body, html {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, sans-serif;
      background: linear-gradient(to right,#0f2027,#203a43,#2c5364);
      color: white; text-align: center; padding: 30px 20px;
    }
    .container {
      background: rgba(0,0,0,0.6);
      border-radius: 12px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.3);
      max-width: 900px; margin: auto; padding: 25px;
    }
    h1 {
      font-size: 2.8rem; color: #f0db4f;
      text-shadow: 0 0 10px #f0db4f,0 0 20px #f0db4f;
      margin-bottom: 10px;
    }
    input, select {
      padding: 8px; font-size: 1rem;
      margin: 10px 5px; border-radius: 6px;
      border: 2px solid #00ffff; background: rgba(0,0,0,0.8);
      color: #00ffff; width: 200px;
    }
    #card-grid {
      display: grid; grid-template-columns: repeat(auto-fill,minmax(100px,1fr));
      gap: 10px; margin-top: 20px;
    }
    .card {
      background: rgba(0,0,0,0.5);
      padding: 5px; border-radius: 8px;
      cursor: pointer;
      transition: transform .2s, box-shadow .2s;
    }
    .card:hover {
      transform: scale(1.05); box-shadow: 0 0 8px #00ffff;
    }
    .card.selected {
      border: 2px solid #00ffff;
    }
    .card img {
      width: 100%; border-radius: 4px;
    }
    .info {
      font-size: .8rem; color: #00ffff; margin-top: 4px;
    }
    #deck-info, #deck-footer {
      font-size: 1.1rem; margin-top: 15px;
    }
    #deck-list {
      list-style: none; padding: 0; margin-top: 8px;
      color: #00ffff; text-align: left; display: inline-block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Clash Royale Deck Builder</h1>
    <select id="arena-select">
      <!-- We'll fill arenas as before -->
      <option value="6">P.E.K.K.A’s Playhouse (Arena 6)</option>
      <option value="10">Hog Mountain (Arena 10)</option>
      <option value="23">Legendary Arena (Arena 23)</option>
    </select>
    <input type="text" id="search" placeholder="Search cards…"/>
    <div id="card-grid"></div>
    <div id="deck-info">Deck: <span id="count">0</span>/8</div>
    <ul id="deck-list"></ul>
    <div id="deck-footer">Avg Elixir: 0 | Rating: N/A</div>
  </div>

  <script>
    // Arena 6+ data including evolutions
    const allCards = {
      "Knight":4, "Firecracker":3, "Skeletons":1,
      "Royal Giant":6, "Zap":2, "Wizard":5, "Tesla":4,
      "Bats":2, "Archers":3, "Valkyrie":4, "Bomber":2,
      "Wall Breakers":2, "Goblin Barrel":3, "Battle Ram":4,
      "Skeleton Army":3, "Goblin Barrel":3
      // ... expand as desired
    };
    const cardNames = Object.keys(allCards);

    const selected = new Set();
    const arenaSel = document.getElementById('arena-select');
    const searchInput = document.getElementById('search');
    const grid = document.getElementById('card-grid');
    const count = document.getElementById('count');
    const dl = document.getElementById('deck-list');
    const footer = document.getElementById('deck-footer');

    function refresh() {
      grid.innerHTML = '';
      const term = searchInput.value.toLowerCase();
      cardNames.filter(name => name.toLowerCase().includes(term)).forEach(name => {
        const div = document.createElement('div');
        div.className = 'card'+(selected.has(name)?' selected':'');
        div.innerHTML = `
          <img src="https://fankit.supercell.com/d/BmehSDJrZNff/game-assets-1?asset-type16=Cards&urlVersion=2.0&name=${encodeURIComponent(name)}" alt="${name}" onerror="this.style.opacity=.5"/>
          <div class="info">${name} (${allCards[name]} Elixir)</div>
        `;
        div.onclick = () => toggle(name, div);
        grid.append(div);
      });
      refreshFooter();
    }

    function toggle(name, div) {
      if (selected.has(name)) { selected.delete(name); div.classList.remove('selected'); }
      else if (selected.size < 8) { selected.add(name); div.classList.add('selected'); }
      refreshFooter();
    }

    function refreshFooter() {
      count.textContent = selected.size;
      dl.innerHTML = [...selected].map(c => `<li>${c} (${allCards[c]} Elixir)</li>`).join('');
      const avg = selected.size ? ([...selected].reduce((a,c)=>a+allCards[c],0)/selected.size).toFixed(2) : 0;
      let rating = 'N/A';
      if (selected.size) {
        const n = parseFloat(avg);
        rating = n < 3.5 ? '7/10 (Cycle)' : n <=5.5 ? '9/10 (Balanced)' : '5/10 (Heavy)';
      }
      footer.textContent = `Avg Elixir: ${avg} | Rating: ${rating}`;
    }

    searchInput.addEventListener('input', refresh);
    refresh();
  </script>
</body>
</html>
