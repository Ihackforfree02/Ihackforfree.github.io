<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF‑8" /><meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Clash Royale Deck Builder</title>
  <style>
    body, html { margin:0; padding:0; font-family:'Segoe UI',sans-serif;
      background: linear-gradient(to right,#0f2027,#203a43,#2c5364);
      color:#fff; text-align:center; padding:30px; }
    .container { background:rgba(0,0,0,0.6); padding:25px; border-radius:12px;
      box-shadow:0 6px 24px rgba(0,0,0,0.3); max-width:900px; margin:auto; }
    h1 { font-size:2.8rem; color:#f0db4f; text-shadow:0 0 10px #f0db4f; margin-bottom:10px; }
    select, input { padding:10px; font-size:1rem; margin:10px 5px;
      border-radius:6px; border:2px solid #00ffff; background:rgba(0,0,0,0.8);
      color:#00ffff; width:240px; }
    #card-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(110px,1fr));
      gap:10px; margin-top:20px; }
    .card { background:rgba(0,0,0,0.5); padding:6px; border-radius:8px;
      cursor:pointer; transition:transform .2s,box-shadow .2s; }
    .card:hover { transform:scale(1.05); box-shadow:0 0 8px #00ffff; }
    .card.selected { border:2px solid #00ffff; }
    .card img { width:100%; height:auto; object-fit:contain; border-radius:4px; }
    .info { font-size:.85rem; color:#00ffff; margin-top:4px; }
    #deck-footer { margin-top:20px; font-size:1.1rem; color:#00ffea; }
    #deck-list { list-style:none; padding:0; margin-top:8px;
      color:#00ffff; text-align:left; display:inline-block; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Clash Royale Deck Builder</h1>
    <select id="arena-select">
      <option value="0">Training Camp</option>
      <option value="1">Goblin Stadium</option>
      <option value="2">Bone Pit</option>
      <option value="3">Barbarian Bowl</option>
      <option value="4">Spell Valley</option>
      <option value="5">Builder’s Workshop</option>
      <option value="6">P.E.K.K.A’s Playhouse</option>
      <option value="7">Royal Arena</option>
      <option value="8">Frozen Peak</option>
      <option value="9">Jungle Arena</option>
      <option value="10">Hog Mountain</option>
      <option value="11">Electro Valley</option>
      <option value="12">Spooky Town</option>
      <option value="13">Rascal’s Hideout</option>
      <option value="14">Serenity Peak</option>
      <option value="15">Miner’s Mine</option>
      <option value="16">Executioner’s Kitchen</option>
      <option value="17">Royal Crypt</option>
      <option value="18">Silent Sanctuary</option>
      <option value="19">Dragon Spa</option>
      <option value="20">Boot Camp</option>
      <option value="21">Clash Fest</option>
      <option value="22">PANCAKES!</option>
      <option value="23">Legendary Arena</option>
    </select>
    <input type="text" id="search" placeholder="Search cards…" />
    <div id="card-grid"></div>
    <div>Deck: <span id="count">0</span>/8</div>
    <ul id="deck-list"></ul>
    <div id="deck-footer">Avg Elixir: 0 | Rating: N/A</div>
  </div>

  <script>
    // Arena->Cards mapping simplified (expand as needed)
    const arenaCards = {
      0:["Knight","Archers","Minions","Arrows","Musketeer","Mini P.E.K.K.A","Fireball","Giant"],
      1:["Goblins","Spear Goblins","Goblin Cage","Goblin Hut"],
      2:["Skeletons","Bomber","Tombstone","Valkyrie"],
      3:["Cannon","Barbarians","Mega Minion","Battle Ram"],
      4:["Electro Spirit","Skeleton Dragons","Fire Spirit","Bomb Tower","Inferno Tower","Wizard"],
      5:["Zap","Mortar","Bats","Rocket","Flying Machine","Hog Rider"],
      6:["Goblin Barrel","Guards","Skeleton Army","Baby Dragon","Witch","P.E.K.K.A"],
      // ... add arenas 7–23
    };

    // Elixir cost lookup from Gigasheet sample dataset :contentReference[oaicite:1]{index=1} and Fandom categories
    const elixirCosts = {
      "Knight":3, "Archers":3, "Minions":3, "Arrows":3, "Musketeer":4, "Mini P.E.K.K.A":4,
      "Fireball":4, "Giant":5, "Goblins":2, "Spear Goblins":2, "Goblin Cage":4, "Goblin Hut":5,
      "Skeletons":1, "Bomber":3, "Tombstone":3, "Valkyrie":4, "Cannon":3, "Barbarians":5,
      "Mega Minion":3, "Battle Ram":4, "Electro Spirit":1, "Skeleton Dragons":4, "Fire Spirit":2,
      "Bomb Tower":4, "Inferno Tower":5, "Wizard":5, "Zap":2, "Mortar":4, "Bats":2,
      "Rocket":6, "Flying Machine":4, "Hog Rider":4, "Goblin Barrel":3, "Guards":3,
      "Skeleton Army":3, "Baby Dragon":4, "Witch":5, "P.E.K.K.A":7
      // Add more as needed
    };

    const selected = new Set();
    const arenaSel = document.getElementById("arena-select");
    const searchInput = document.getElementById("search");
    const grid = document.getElementById("card-grid");
    const count = document.getElementById("count");
    const dl = document.getElementById("deck-list");
    const footer = document.getElementById("deck-footer");

    function showCards() {
      grid.innerHTML = "";
      const term = searchInput.value.toLowerCase();
      const available = new Set();
      for (let i = 0; i <= +arenaSel.value; i++) {
        (arenaCards[i] || []).forEach(name => available.add(name));
      }
      [...available].filter(name => name.toLowerCase().includes(term)).forEach(name => {
        const el = document.createElement("div");
        el.className = "card" + (selected.has(name) ? " selected" : "");
        const imgName = name.replace(/ /g, "") + "Card.png";
        const imgUrl = `https://static.wikia.nocookie.net/clashroyale/images/${imgName}`;
        el.innerHTML = `<img src="${imgUrl}" alt="${name}" onerror="this.style.opacity=.5"><div class="info">${name} (${elixirCosts[name] !== undefined ? elixirCosts[name] : "?"} Elixir)</div>`;
        el.onclick = () => toggleCard(name, el);
        grid.append(el);
      });
      updateFooter();
    }

    function toggleCard(name, el) {
      if (selected.has(name)) {
        selected.delete(name);
        el.classList.remove("selected");
      } else if (selected.size < 8) {
        selected.add(name);
        el.classList.add("selected");
      }
      updateFooter();
    }

    function updateFooter() {
      count.textContent = selected.size;
      const list = [...selected];
      dl.innerHTML = list.map(c => `<li>${c} (${elixirCosts[c] ?? "?"} Elixir)</li>`).join("");
      const avg = list.length ? (list.reduce((sum, c) => sum + (elixirCosts[c] || 0), 0) / list.length).toFixed(2) : 0;
      let rating = "N/A";
      if (list.length) {
        rating = avg < 3.0 ? " Fast Cycle" :
                 avg <= 4.0 ? " Balanced" : " Heavy";
        rating = `${(avg < 3.0 ? 7 : avg <= 4.0 ? 9 : 5)}/10 (${rating.trim()})`;
      }
      footer.textContent = `Avg Elixir: ${avg} | Rating: ${rating}`;
    }

    arenaSel.onchange = showCards;
    searchInput.oninput = showCards;
    showCards();
  </script>
</body>
</html>
